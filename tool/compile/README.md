# C++ Compilation Utilities

## Overview

This directory (`tool/compile/`) is intended to house Python scripts and modules that act as wrappers or helpers for compiling C++ source code. These utilities are designed to be used by various agents within the profiling and optimization pipeline, particularly those that need to build C++ code for testing, evaluation, or before performance analysis.

## Purpose

Compilation utilities serve several key functions:

-   **Standardize Compilation:** Provide a consistent way to compile C++ code across different parts of the pipeline, ensuring that the same compiler flags and build settings are used where necessary.
-   **Error Handling:** Capture and report compilation errors in a structured way that can be understood and acted upon by the agents.
-   **Simplify Build Process:** Abstract the complexities of invoking a C++ compiler (e.g., g++, clang++) and managing any necessary build steps.
-   **Support for Code Variants:** Facilitate the compilation of multiple code variants, such as those generated by the `Replicator` agent, to check for syntactic correctness and prepare them for further evaluation.

## Potential Functionality

While the specific tools can vary, common functionalities might include:

-   A Python function or class that takes C++ source code (either as a string or a path to a file) and compilation flags as input.
-   Invocation of a system C++ compiler (e.g., `subprocess.run(['g++', ...])`).
-   Capture of `stdout` and `stderr` from the compiler to detect errors or warnings.
-   Returning a status (success/failure) and any compiler messages.
-   Options to specify output executable names and paths.
-   Support for linking against necessary libraries.

## Usage Example (Conceptual)

An agent (e.g., an `Evaluator` agent) might use a compilation tool as follows:

```python
# Conceptual usage within an agent
from tool.compile.compiler_wrapper import CppCompiler # Assuming a CppCompiler class exists

compiler = CppCompiler(compiler_flags=['-O2', '-std=c++17'])

cpp_code_variant = """
#include <iostream>
int main() {
  std::cout << "Hello, Optimized World!" << std::endl;
  return 0;
}
"""

compile_success, output_path, errors = compiler.compile_code_string(cpp_code_variant, output_name='variant_test')

if compile_success:
    print(f"Successfully compiled: {output_path}")
    # Proceed to run/test the compiled executable
else:
    print(f"Compilation failed:\n{errors}")
```

## Note

This README describes the *intended* purpose and potential functionality. The actual tools and their specific APIs would be defined by the Python modules implemented within this directory.
